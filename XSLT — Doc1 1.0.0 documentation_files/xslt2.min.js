var errors=new Array;function handler(e){errors.push(e.message+"\n***See web browser console for more details***")}function transform(e){var t=document.getElementById("html_input-"+e).value,r=document.getElementById("xsl_stylesheet-"+e).value;if(errors=new Array,t||r){Saxon.setErrorHandler(handler),Saxon.setLogLevel("SEVERE");var n,o=Saxon.parseXML(r),a=Saxon.parseXML(t),s=Saxon.newXSLT20Processor(o);result=s.transformToDocument(a),errors.length>0?alert(errors.toString()):(xmlSer=new XMLSerializer,n=xmlSer.serializeToString(result)),$("#html_output-"+e).html(n),$("#iframe-"+e).contents().find("body").css("font-family","Menlo,Monaco,Consolas,'Courier New',monospace").css("font-size","90%"),$("#iframe-"+e).contents().find("body").text(function(){return $("#html_output-"+e).html()}),$("#html_output-"+e).html(""),$("button[data-target='"+e+"']").addClass("enabled")}else $("button[data-target='"+e+"']").removeClass("enabled")}window.onerror=function(e,t,r){return!0},$(document).ready(function(){$(".preview").click(function(){if($(this).hasClass("enabled")){var e=$(this).data("target"),t=$("#iframe-"+e).contents().find("body").text();"<"==t[0]&&($("#iframe-"+e).contents().find("body").html(t),$(this).removeClass("enabled"))}})});
